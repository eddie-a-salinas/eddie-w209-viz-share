<!DOCTYPE html>
<html lang="en">

  <head>
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <meta charset="UTF-8" />
    <title>Congress Voting Visualization</title>
    <link rel="stylesheet" type="text/css"  href="{{ url_for('static', filename='css/main_test.css') }}">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
  </head>

  <body >
	<!--<div style="z-index: 99; position: fixed; left: 10px; top: 10px; ">DIV</div>-->


  	<div class="navbar">
		 <a class="active" href="#home">Home</a>
		 <a href="#senate_dashboard">Senate Dashboard</a>
		 <a href="#house_dashboard">House Dashboard</a>
		 <a href="#about">About</a>
	</div>

	<div class ="main" align="center">


		<img  width="30%" height="30%" src="{{ url_for('static', filename='images/capitol_rainbow_pseats.png')  }}" style="background:transparent;margin-top: 30px">

		<hr>
		<table style="margin-left: auto; margin-right: auto; table-layout: fixed;">
				<thead>
				</thead>
				<tbody>
					<tr>
						<td style="width=30%;">
							<!-- <a href="#senate_dashboard">Go to Senate Dashboard</a> -->
						</td>

						<td style="width=30%;">
								<a id="home">
									<h1> Visual Representation </h1>
								</a>
							<h2> A Story Told by the Congressional Voting</h2>
						</td>
						<td style="width=30%;">
							<!-- <a href="#house_dashboard">Go to House Dashboard</a> -->
						</td>
						
					</tr>
					
				</tbody>
			</table>
		<div>

			<table style="margin-left: auto; margin-right: auto; table-layout: fixed;">
				<thead>
				</thead>
				<tbody>
					
					<tr>
						<td style="width=30%; ">79<br>Congresses</td>
						<td style="width=30%;">83,175<br>Roll Calls</td>
						<td style="width=30%;">22,105,625<br>Votes</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
<hr>


<h2>Broad Story</h2>
<p>In his famous 1858 Republican convention speech, President Lincoln warned that "A house divided against itself cannot
stand." His biblically inspired expression echoed George Washington's warning about "the baneful effects of the spirit of
party." President Washington called for its restraint, lamenting of the party, that:
</p>
<p>It serves always to distract the public councils and enfeeble the public administration. It agitates the community with
ill-founded jealousies and false alarms, kindles the animosity of one part against another, foments occasionally riot and
insurrection. It opens the door to foreign influence and corruption, which find a facilitated access to the government itself
through the channels of party.
</p>
<p>Our intent with this website is to let you explore the administration of the US Government while providing you tools view
that administration within the context of the political party. To that end, you can begin your exploration in Congress and
navigate through the Senate or the House of Representatives, examining bill proposals and passages over time and
drilling in on specific votes and the degree to which they reflect the political factionalism warned about in these speeches.
</p>
<p>That being said, any congress member who is interested in designing a bill, or historians who may be interested in finding 
historical trails among the millions of past congressional votes are welcome to use our tools.
</p>
<p>
You can also find a short instruction of how each visualization works at this <a href="https://docs.google.com/presentation/d/1GU23LYKsEWXWi3UJ5kPmaSwA07Id3zqnJJ7d_-ncQWw/edit?usp=sharing">link</a>
</p>
<hr>
<table align="center" width=100%><thead><tr><td colspan=2><h3>Definitions</h3></td></tr></thead>
<tbody>
	<tr><td><h4><a href="https://www.senate.gov/reference/glossary_term/roll_call_vote.htm">Roll Call</a></h4></td><td style="text-align:left;" >An item (e.g. bill, resolution, official confirmation, etc.) over which congress votes.</td></tr>
	<tr><td><h4>Congress </h4></td><td style="text-align:left;" >A time-series of meetings (roll-calls), each lasting about 1-2 years, grouped into "sessions" covering both the <em>House</em> and <em>Senate</em>.  For this project all sessions for a given congress have been merged into a single session.  This imposes a strictly serial and increasing series of roll calls (i.e. 5,6,7,8,9,10 for 2 sessions instead of 5,6,7,1,2,3 for 2 sessions)</td></tr>
</tbody></table>

<hr>	
<table>
	<thead>
		<tr>
			<td colspan=3>
				<a id="senate_dashboard">
					<h1>Senate Dashboard</h1>
				</a>
				<svg width=1 height=1 overflow="visible" style="float:left;"><text x=0 style="writing-mode: vertical-rl; text-orientation: upright;" font-size="2em" fill="steelblue">Senate Senate Senate</text></svg>
			</td>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>

				<!-- timeline -->
				<h3># of Roll Calls over the Years and Congress - Senate</h3>   
				<div id="chart3"></div></td>

			</td>	
			<td></td>
			<td>

			      <!-- butterfly chart -->
			      <h3>Dem-Rep Votes per Congress - Senate</h3>    
			      <div id="chart1"></div>
		</tr>
		<tr>
			<td>
				<!--scatter plot-->
				<div id="scatter_plot_senate_header_div"></div>
				<svg id="scatter_plot_senate" width=500 height=500  overflow="visible"></svg>
			</td>
			<td style="vertical-align:top;" >
				<div height="10%">
					<table style="background-color:lightsteelblue;" >
						<thead>
						</thead>
						<tbody  >
							<tr>
								<td>Congress</td><td><div id="cong_sen_sel_dd_div">drop-down</div></td>
							<tr/>
							<tr>
								<td>Roll Call</td><td><div id="rollcall_sen_sel_dd_div">drop-down</div></td>
							</tr>						
						</tbody>
					</table>
				</div>
			</td>
			<td>

				<!-- seating chart -->
				<div id="senate_seatvote_detail_div"  class="senate_house_rc_detail"></div>
				<table>
					<tr>
						<td><svg id="senate_seating_svg_id" width=400 height=325   overflow="visible" ></svg>
						<div  style="vertical-align:top;" id="senate_seat_legend_div">BLAH</div>
						</td>
					</tr>
				</table>		
				
				
			</td>
		</tr>
	</tbody>
</table>
<!-- SENATE DATATABLE -->
<div align="center">
<h3 align="center">Senate RollCall Search Table</h3>
Use the search field to the right.  Click the rollcall to load the row into the visualizations
</div>
<table border=1 id="senate_datatable" class="display" width="100%" style="width:100%">
	<thead> <tr> <th>Congress</th>  <th>Roll Call</th> <th>YYYY-MM-DD</th>  <th>Description</th> <th>% Yea</th>  </tr> </thead> 
	<tbody></tbody>
</table>


<!------------HOUSE---------------->
<hr>	
<table>
	<thead>
		<tr>
			<td colspan=3>
				<a id="house_dashboard">
					<h1>House Dashboard</h1>
				</a>
				
				<svg width=1 height=1 overflow="visible" style="float:left;"><text x=0 style="writing-mode: vertical-rl; text-orientation: upright;" font-size="2em" fill="steelblue">House House House House House</text></svg>
			</td>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>

				<!-- timeline -->
				<h3># of Roll Calls over the Years and Congress - House</h3>   
				<div id="chart4"></div></td>

			</td>	
			<td></td>
			<td>

			      <!-- butterfly chart -->
			      <h3>Dem-Rep Votes per Congress - House</h3>    
			      <div id="chart2"></div>
		</tr>
		<tr>
			<td>
				<!--scatter plot-->
				<div id="scatter_plot_house_header_div"></div>
				<svg id="scatter_plot_house" width=500 height=500  overflow="visible"></svg>
			</td>
			<td style="vertical-align:top;">
				<div height="10%">
					<table style="background-color:lightsteelblue;" >
						<thead>
						</thead>
						<tbody>
							<tr>
								<td>Congress</td><td><div id="cong_house_sel_dd_div">drop-down</div></td>
							<tr/>
							<tr>
								<td>Roll Call</td><td><div id="rollcall_house_sel_dd_div">drop-down</div></td>
							</tr>						
						</tbody>
					</table>
				</div>
			</td>
			<td>

				<!-- seating chart -->
				<div id="house_seatvote_detail_div" class="senate_house_rc_detail"></div>
				<table>
					<tr>
					<td>
						<svg id="house_seating_svg_id" width=750 height=535 overflow="visible" ></svg>
						<div style="vertical-align:top;"  id="house_seat_legend_div">BLAH</div>
					</td>
					</tr>
				</table>		
				
				
			</td>
		</tr>
	</tbody>
</table>
<!-- SENATE DATATABLE -->
<div align="center">
<h3 align="center">House RollCall Search Table</h3>
Use the search field to the right.  Click the rollcall to load the row into the visualizations
</div>
<table border=1 id="house_datatable" class="display" width="100%" style="width:100%">
	<thead> <tr> <th>Congress</th>  <th>Roll Call</th> <th>YYYY-MM-DD</th>  <th>Description</th>  <th>% Yea</th> </tr> </thead> 
	<tbody></tbody>
</table>
	<svg width=10 height=400></svg>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="{{ url_for('static', filename='js/main_test.js')  }}" ></script>
    <script src="{{ url_for('static', filename='js/seat_utils.js')  }}"></script>
    <script src="{{ url_for('static', filename='js/scatter_plot.js')  }}" ></script>
    <script src="{{ url_for('static', filename='js/utils_test.js') }}" ></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script>

var setupCongressBiCameralRCSelections=function()
	{
	var impose_div_ids=['rollcall_sen_sel_dd_div','rollcall_house_sel_dd_div'];
	var sel_ids=['congress_rc_senate_id','congress_rc_house_id'];
	var on_change_names=['onChangeSenateRC','onChangeHouseRC'];
	var chamber_names=["senate","house"];
	var min_rc=1;
	var max_rc=1;
	for(var r=0;r<cong_min_max_rollnums.length;r++)
		{
		var this_rc=parseInt(cong_min_max_rollnums[r][3]);
		if(this_rc>max_rc)
			{
			max_rc=this_rc;
			}
		}
	console.log("max RC across all chambers/congresses is "+max_rc);
	for(var s=0;s<sel_ids.length;s++)
		{
		var selectionHTML="<select  style=\"width: 50px\"   onchange=\""+on_change_names[s]+"()\"  id=\"congress_rc_"+chamber_names[s]+"_id\">\n";
		for(var rc=min_rc;rc<=max_rc;rc++)
			{
			selectionHTML+="<option value=\""+rc+"\">"+rc+"</option>\n";
			}
		selectionHTML+="</select>\n";
		var sel_div=$('#'+impose_div_ids[s]);
		sel_div.html(selectionHTML);
		}
	}

var setupHouseCongressSelections=function()
	{
	var div_ids=["cong_house_sel_dd_div"];
	var chamber_names=["house"];
	for(var d=0;d<div_ids.length;d++)
		{
		var selection_id="congress_"+chamber_names[d]+"_id";
		var selectionHTML="<select    onchange=\"onChangeHouseCongress()\"   id=\""+selection_id+"\">\n";
		var min_cong=35;
		var max_cong=113;
		for(var c=min_cong;c<=max_cong;c++)
			{
			selectionHTML+="<option value=\""+c+"\">"+c+"</option>\n";
			}
		selectionHTML+="</select>\n";
		var sel_div=$('#'+div_ids[d]);
		sel_div.html(selectionHTML);
		
		}
	}


var setupHouseCongressRCSelections=function()
	{
	var sel_ids=["congress_house_id"];
	var chamber_names=["house"];
	var impose_div_ids=["rollcall_house_sel_dd_div"];
	for(var d=0;d<sel_ids.length;d++)
		{
		var cong_chamb_selection_val_raw=$('#'+sel_ids[d]).val();
		console.log("Raw value is "+cong_chamb_selection_val_raw);
		var cong_chamb_selection_val=parseInt(""+cong_chamb_selection_val_raw+"");
		var cong_chamb=chamber_names[0];
		//console.log("To call getMMRollCallSelectionDDFromGivenCongress with sel val of "+cong_chamb_selection_val+" and chamber ="+cong_chamb);
		var cong_cham_mmvals=getMMRollCallSelectionDDFromGivenCongress(cong_chamb_selection_val,cong_chamb);
		//console.log("From cong "+cong_chamb_selection_val+" and chamber "+cong_chamb+" the mm is "+JSON.stringify(cong_cham_mmvals));
		if(cong_cham_mmvals!=null)
			{
			var min_rc=cong_cham_mmvals[0];
			var max_rc=cong_cham_mmvals[1];
			var selectionHTML="<select  style=\"width: 50px\"   onchange=\"onChangeHouseRC()\"  id=\"congress_rc_"+chamber_names[d]+"_id\">\n";
			for(var rc=min_rc;rc<=max_rc;rc++)
				{
				selectionHTML+="<option value=\""+rc+"\">"+rc+"</option>\n";
				}
			selectionHTML+="</select>\n";
			var sel_div=$('#'+impose_div_ids[d]);
			sel_div.html(selectionHTML);
			
			}		
		}
	}


var pullCongressHouseSelectionAndUpdateScatterPlot=function()
	{
	console.log("pullCongressHouseSelectionAndUpdateScatterPlot called");
	var sen_cong_sel=pullHouseSelections();
	var cong=sen_cong_sel[0];
	var rc_callback=function(roll_call_num)
		{
		//console.log("RC_callback called with roll_call_num = "+roll_call_num);
		var rc_selection_elem=$('#congress_rc_house_id');
		if(rc_selection_elem!=null)
			{
			rc_selection_elem.val(roll_call_num);
			onChangeHouseRC();
			}
		else
			{
			alert("Error in trying to set house roll-call value!");
			}		
		}
	var cong_to_year_dict=get_cong_to_year_map();
	var ann_text="";
	if(cong+"" in cong_to_year_dict)
		{
		var year_range=cong_to_year_dict[""+cong];
		ann_text="From "+year_range.join(" to ");
		}
	var title_text="<h3>Partisanship Percentages among the Rollcalls of the<br>"+ordinalNum(cong)+" Congress in the House</h3>";
	if(ann_text.length>1)
		{
		title_text+=ann_text;
		}
	$('#scatter_plot_house_header_div').html(title_text);
	issueScatterPlotUpdate("scatter_plot_house",cong,"House",rc_callback);
	}

var functionHouseTimeButterCallback=function(cong_num)
	{
	console.log("functionHouseTimeButterCallback called with cong_num="+cong_num);
	var cong_house_sel_elem=$("#congress_house_id");
	cong_house_sel_elem.val(cong_num);
	onChangeHouseCongress();
	}


var onChangeHouseCongress=function()
	{
	//new congress is selected, update the roll-call list because they change per congress
	console.log("onChangeHouseCongress called");
	$('#congress_rc_house_id').val(1);
	//setupHouseCongressRCSelections();
	pullCongressHouseSelectionAndUpdateScatterPlot();
	onChangeHouseRC();
	}

var onChangeHouseRC=function()
	{
	console.log("onChangeHouseRC called");
	pullHouseSelectionsAndUpdateSeating();
	}

var pullHouseSelections=function()
	{
	sel_ids=["congress_house_id","congress_rc_house_id"];
	var sel_vals=[];
	for(var v=0;v<sel_ids.length;v++)
		{
		var sel_elem=$('#'+sel_ids[v]);
		var sel_val=sel_elem.val();
		sel_vals.push(parseInt(""+sel_val+""));
		}
	var selectedCongress=sel_vals[0];
	var selectedRC=sel_vals[1];
	console.log("EDDIE911 Selected HOUSE congress is "+selectedCongress+" and selected HOUSE rollcall is "+selectedRC+"");
	return [selectedCongress,selectedRC];
	}




var imposeHouseSeatingChart=function(cong_num,rollnum) {
	//console.log("in imposeHouseSeatingChart");
	//console.log("route @app.route('/getMemberVote/<int:congress>/<int:rollcall>/<string:chamber>'");
	var url="getMemberVote/"+cong_num+"/"+rollnum+"/house"
	//console.log("url is "+url);
	//d3.json(url[, callback])
	d3.json(url,function(error, text) {
		console.log("Error is "+error);
		//console.log("text is "+JSON.stringify(text));
		$('#house_seating_svg_id').html("");
		update_seat_svg("house_seating_svg_id",text,275,10);
		//eddie_func();
		});
	//detail_url=@app.route('/rc_detail/<int:congress>/<int:rcnum>/<chamber>')
	var detail_url="rc_detail/"+cong_num+"/"+rollnum+"/House";
		d3.json(detail_url,function(error,text) {
				if(error!=null) {
					$('#house_seatvote_detail_div').html("<h3>"+error+"</h3>");
				} else {
					var detail=text[0];
					//console.log("DETAIL is "+JSON.stringify(detail,null,4));
					var post_text="Vote name unavailable !";
					post_det_arr=[detail['vote_question'],detail['vote_description'],detail['vote_detail_description']];
					post_det_arr=post_det_arr.filter(function(d) { if(d.length>0) { return true; } else { return  false;}});
					post_text=post_det_arr.join("<br>");
					post_text="<h3>"+ordinalNum(cong_num)+" Congress<br>Roll Call #"+rollnum+" in the House<br>Held "+detail['rollcall_date']+"</h3>"+post_text;
					$('#house_seatvote_detail_div').html("<h3>"+post_text+"</h3>");
				}
			
			});
	//house_vote_detail_div
	}


var pullHouseSelectionsAndUpdateSeating=function()
	{
	var house_selections=pullHouseSelections();
	var max_rc_val_house_this_congress=getMMRollCallSelectionDDFromGivenCongress(parseInt(house_selections[0]),"House")[1];
	if(parseInt(house_selections[1])>parseInt(max_rc_val_house_this_congress))
		{
		alert('For selected house congress '+house_selections[0]+', max roll-call is '+max_rc_val_house_this_congress+' so using that instead of '+house_selections[1]);
		house_selections[1]=max_rc_val_house_this_congress;
		$('#congress_rc_house_id').val(""+max_rc_val_house_this_congress);
		}
	console.log("EDDIE : house selections are : "+JSON.stringify(house_selections));
	imposeHouseSeatingChart(parseInt(house_selections[0]),parseInt(house_selections[1]));
	}




		console.log("In html script...");
		setupHouseCongressSelections();
		setupCongressBiCameralRCSelections();
		//setupHouseCongressRCSelections();
		onChangeHouseCongress();
	installUpdatedSeatLegend("house_seat_legend_div",25);
    </script>


    


    <script>



var setupSenateCongressSelections=function()
	{
	var div_ids=["cong_sen_sel_dd_div"];
	var chamber_names=["senate"];
	for(var d=0;d<div_ids.length;d++)
		{
		var selection_id="congress_"+chamber_names[d]+"_id";
		var selectionHTML="<select    onchange=\"onChangeSenateCongress()\"   id=\""+selection_id+"\">\n";
		var min_cong=35;
		var max_cong=113;
		for(var c=min_cong;c<=max_cong;c++)
			{
			selectionHTML+="<option value=\""+c+"\">"+c+"</option>\n";
			}
		selectionHTML+="</select>\n";
		var sel_div=$('#'+div_ids[d]);
		sel_div.html(selectionHTML);
		
		}
	}


var setupSenateCongressRCSelections=function()
	{
	var sel_ids=["congress_senate_id"];
	var chamber_names=["senate"];
	var impose_div_ids=["rollcall_sen_sel_dd_div"];
	for(var d=0;d<sel_ids.length;d++)
		{
		var cong_chamb_selection_val_raw=$('#'+sel_ids[d]).val();
		console.log("Raw value is "+cong_chamb_selection_val_raw);
		var cong_chamb_selection_val=parseInt(""+cong_chamb_selection_val_raw+"");
		var cong_chamb=chamber_names[0];
		var cong_cham_mmvals=getMMRollCallSelectionDDFromGivenCongress(cong_chamb_selection_val,cong_chamb);
		//console.log("From cong "+cong_chamb_selection_val+" and chamber "+cong_chamb+" the mm is "+JSON.stringify(cong_cham_mmvals));
		if(cong_cham_mmvals!=null)
			{
			var min_rc=cong_cham_mmvals[0];
			var max_rc=cong_cham_mmvals[1];
			var selectionHTML="<select  style=\"width: 50px\"   onchange=\"onChangeSenateRC()\"  id=\"congress_rc_"+chamber_names[d]+"_id\">\n";
			for(var rc=min_rc;rc<=max_rc;rc++)
				{
				selectionHTML+="<option value=\""+rc+"\">"+rc+"</option>\n";
				}
			selectionHTML+="</select>\n";
			var sel_div=$('#'+impose_div_ids[d]);
			sel_div.html(selectionHTML);
			
			}		
		}
	}


var pullCongressSenateSelectionAndUpdateScatterPlot=function()
	{
	console.log("pullCongressSelectionAndUpdateScatterPlot called");
	var sen_cong_sel=pullSenateSelections();
	var cong=sen_cong_sel[0];
	var rc_callback=function(roll_call_num)
		{
		//console.log("RC_callback called with roll_call_num = "+roll_call_num);
		var rc_selection_elem=$('#congress_rc_senate_id');
		if(rc_selection_elem!=null)
			{
			rc_selection_elem.val(roll_call_num);
			onChangeSenateRC();
			}
		else
			{
			alert("Error in trying to set roll-call value!");
			}		
		}
	var cong_to_year_dict=get_cong_to_year_map();
	var ann_text="";
	if(cong+"" in cong_to_year_dict)
		{
		var year_range=cong_to_year_dict[""+cong];
		ann_text="From "+year_range.join(" to ");
		}
	var title_text="<h3>Partisanship Percentages among the Rollcalls of the<br>"+ordinalNum(cong)+" Congress in the Senate</h3>";
	if(ann_text.length>1)
		{
		title_text+=ann_text;
		}
	$('#scatter_plot_senate_header_div').html(title_text);
	issueScatterPlotUpdate("scatter_plot_senate",cong,"Senate",rc_callback);
	}

var functionSenateTimeButterCallback=function(cong_num)
	{
	//console.log("functionSenateTimeButterCallback called with cong_num="+cong_num);
	var cong_sen_sel_elem=$("#congress_senate_id");
	cong_sen_sel_elem.val(cong_num);
	onChangeSenateCongress();
	}


var onChangeSenateCongress=function()
	{
	//new congress is selected, update the roll-call list because they change per congress
	console.log("onChangeSenateCongress called");
	$('#congress_rc_senate_id').val(1);
	//setupSenateCongressRCSelections();
	pullCongressSenateSelectionAndUpdateScatterPlot();
	onChangeSenateRC();
	}

var onChangeSenateRC=function()
	{
	console.log("onChangeSenateRC called");
	pullSenateSelectionsAndUpdateSeating();
	}

var pullSenateSelections=function()
	{
	sel_ids=["congress_senate_id","congress_rc_senate_id"];
	var sel_vals=[];
	for(var v=0;v<sel_ids.length;v++)
		{
		var sel_elem=$('#'+sel_ids[v]);
		var sel_val=sel_elem.val();
		sel_vals.push(parseInt(""+sel_val+""));
		}
	var selectedCongress=sel_vals[0];
	var selectedRC=sel_vals[1];
	//console.log("Selected congress is "+selectedCongress+" and selected rollcall is "+selectedRC+"");
	return [selectedCongress,selectedRC];
	}




var imposeSenateSeatingChart=function(cong_num,rollnum) {
	//console.log("in imposeSenateSeatingChart");
	//console.log("route @app.route('/getMemberVote/<int:congress>/<int:rollcall>/<string:chamber>'");
	var url="getMemberVote/"+cong_num+"/"+rollnum+"/senate"
	//console.log("url is "+url);
	//d3.json(url[, callback])
	d3.json(url,function(error, text) {
		console.log("Error is "+error);
		//console.log("text is "+JSON.stringify(text));
		$('#senate_seating_svg_id').html("");
		update_seat_svg("senate_seating_svg_id",text,200,10);
		//eddie_func();
		});
	//detail_url=@app.route('/rc_detail/<int:congress>/<int:rcnum>/<chamber>')
	var detail_url="rc_detail/"+cong_num+"/"+rollnum+"/Senate";
		d3.json(detail_url,function(error,text) {
				if(error!=null) {
					$('#senate_seatvote_detail_div').html("<h3>"+error+"</h3>");
				} else {
					var detail=text[0];
					//console.log("DETAIL is "+JSON.stringify(detail,null,4));
					var post_text="Vote name unavailable !";
					post_det_arr=[detail['vote_question'],detail['vote_description'],detail['vote_detail_description']];
					post_det_arr=post_det_arr.filter(function(d) { if(d.length>0) { return true; } else { return false;}});
					post_text=post_det_arr.join("<br>");
					post_text="<h3>"+ordinalNum(cong_num)+" Congress<br>Roll Call #"+rollnum+" in the Senate<br>Held "+detail['rollcall_date']+"</h3>"+post_text;
					$('#senate_seatvote_detail_div').html(post_text);
				}
			
			});
	//senate_vote_detail_div
	}


var pullSenateSelectionsAndUpdateSeating=function()
	{
	console.log("pullSenateSelectionsAndUpdateSeating called");
	var senate_selections=pullSenateSelections();
	var max_rc_val_senate_this_congress=getMMRollCallSelectionDDFromGivenCongress(parseInt(senate_selections[0]),"Senate")[1];
	if(parseInt(senate_selections[1])>parseInt(max_rc_val_senate_this_congress))
		{
		alert('For selected senate congress '+senate_selections[0]+', max roll-call is '+max_rc_val_senate_this_congress+' so using that instead of '+senate_selections[1]);
		senate_selections[1]=max_rc_val_senate_this_congress;
		$('#congress_rc_senate_id').val(""+max_rc_val_senate_this_congress);
		}
	imposeSenateSeatingChart(parseInt(senate_selections[0]),parseInt(senate_selections[1]));

	
	}




		console.log("In html script...");
		setupSenateCongressSelections();
		//setupSenateCongressRCSelections();

		onChangeSenateCongress();
	installUpdatedSeatLegend("senate_seat_legend_div",25);



//SENATE DATATABLE
    $('#senate_datatable').DataTable( {
	"dom": '<"top"rflp>t<"bottom"i><"clear">',
        "ajax": 'rc_datatable/senate',
	 "columns": [
		{},
		 {"render": function(data, type, row, meta)
			{
			if(type === 'display')
				{
				//data = '<a href="' + data + '">' + data + '</a>';
				//$('#congress_rc_senate_id').val(
				//console.log('row is '+JSON.stringify(row));
				var selected_rollcall=row[1];
				var selected_congress=row[0];
				var js_to_run="$('#congress_rc_senate_id').val("+selected_rollcall+");$('#congress_senate_id').val("+selected_congress+");pullCongressSenateSelectionAndUpdateScatterPlot();imposeSenateSeatingChart("+selected_congress+","+selected_rollcall+");"
				data="<a href=\"javascript:"+js_to_run+";\" >"+data+"</a>";
				}
			return data;
			}
		},{},{},{}
	]
    } );

//HOUSE DATATABLE
    $('#house_datatable').DataTable( {
	"dom": '<"top"rflp>t<"bottom"i><"clear">',
        "ajax": 'rc_datatable/house',
	 "columns": [
		{},
		 {"render": function(data, type, row, meta)
			{
			if(type === 'display')
				{
				//data = '<a href="' + data + '">' + data + '</a>';
				//$('#congress_rc_senate_id').val(
				//console.log('row is '+JSON.stringify(row));
				var selected_rollcall=row[1];
				var selected_congress=row[0];
				var js_to_run="$('#congress_rc_house_id').val("+selected_rollcall+");$('#congress_house_id').val("+selected_congress+");pullCongressHouseSelectionAndUpdateScatterPlot();imposeHouseSeatingChart("+selected_congress+","+selected_rollcall+");"
				data="<a href=\"javascript:"+js_to_run+";\" >"+data+"</a>";
				}
			return data;
			}
		},{},{},{}
	]
    } );


    </script>
    <script src="{{ url_for('static', filename='js/chandra_vis.js') }}"></script>
    <a id="about">


    <footer class="copyright">
    <div>
        All copy rights and credits of the data belong to the original creators. <br> This site is built solely for academic purposes. Related course: Data Visualization, MIDS program, UC Berkeley. <br>
        Sources: https://voteview.com, https://www.senate.gov, https://www.congress.gov <br>
        Team member: Edward Salinas, Jason K. Moore, Chandra Shekar Bikkanur, Junjie Ma <br>
    </div>
	</a>
  </footer>
  </body>
</html>
